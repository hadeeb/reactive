(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"80G+":function(e,t,n){"use strict";n.r(t),n.d(t,"_frontmatter",(function(){return c})),n.d(t,"default",(function(){return b}));n("5hJT"),n("W1QL"),n("K/PF"),n("t91x"),n("75LO"),n("PJhk"),n("mXGw");var r=n("SAVP"),o=n("TjRS");n("aD51");function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c={};void 0!==c&&c&&c===Object(c)&&Object.isExtensible(c)&&!c.hasOwnProperty("__filemeta")&&Object.defineProperty(c,"__filemeta",{configurable:!0,value:{name:"_frontmatter",filename:"docs/observe.mdx"}});var p={_frontmatter:c},s=o.a;function b(e){var t=e.components,n=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,["components"]);return Object(r.b)(s,a({},p,n,{components:t,mdxType:"MDXLayout"}),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"Connect your React apps to reactive store")),Object(r.b)("h2",{id:"storeprovider"},"StoreProvider"),Object(r.b)("p",null,"Make the store accessible to the rest of the app."),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'import React from "react";\nimport ReactDOM from "react-dom";\n\nimport { StoreProvider } from "@hadeeb/reactive";\nimport store from "./store";\n\nimport App from "./App";\n\nconst rootElement = document.getElementById("root");\nReactDOM.render(\n  <StoreProvider store={store}>\n    <App />\n  </StoreProvider>,\n  rootElement\n);\n')),Object(r.b)("h2",{id:"usestore"},"useStore"),Object(r.b)("p",null,"Read store from components"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'import React from "react";\nimport { useStore } from "@hadeeb/reactive";\n\nfunction CounterDisplay() {\n  const [state, dispatch] = useStore();\n\n  return <span>{state.count}</span>;\n}\n')),Object(r.b)("h2",{id:"observe"},"observe"),Object(r.b)("p",null,"Wrap your function components to track usage of state and rerender when necessary"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'import React from "react";\nimport { useStore, observe } from "@hadeeb/reactive";\n\nfunction CounterDisplay() {\n  const [state, dispatch] = useStore();\n\n  return <span>{state.count}</span>;\n}\n\nexport default observe(CounterDisplay);\n')),Object(r.b)("h3",{id:"forwardref--memo"},"forwardRef & memo"),Object(r.b)("p",null,"Components wrapped with ",Object(r.b)("inlineCode",{parentName:"p"},"observe")," have ",Object(r.b)("inlineCode",{parentName:"p"},"React.memo")," applied by default.\nIf the component to observe is also supposed to forward refs, don't apply ",Object(r.b)("inlineCode",{parentName:"p"},"forwardRef"),", pass ",Object(r.b)("inlineCode",{parentName:"p"},"forwardRef : true")," to ",Object(r.b)("inlineCode",{parentName:"p"},"observe"),"."),Object(r.b)("p",null,Object(r.b)("inlineCode",{parentName:"p"},"observe")," take an optional second argument with the shape"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"{\n  forwardRef?:boolean; // default = false\n  memo?:boolean; // default = true\n}\n")),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'import React from "react";\nimport { useStore, observe } from "@hadeeb/reactive";\n\nfunction Counter(props, ref) {\n  const [, dispatch] = useStore();\n\n  function onClick() {\n    dispatch("INCREMENT");\n  }\n\n  return (\n    <div>\n      <span>{state.count}</span>\n      <button ref={ref} onClick={onClick}>\n        +\n      </button>\n    </div>\n  );\n}\n\nexport default observe(Counter, {\n  forwardRef: true\n});\n')),Object(r.b)("h2",{id:"decorate"},"decorate"),Object(r.b)("p",null,"Access store from class components"),Object(r.b)("pre",null,Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),'import React from "react";\nimport { decorate } from "@hadeeb/reactive";\n\nclass CounterDisplay extends React.Component {\n  render() {\n    const store = this.context;\n    const state = store.getState();\n\n    return return <span>{state.count}</span>;\n  }\n}\n\nexport default decorate(CounterDisplay);\n')),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"decorate")," can also be used as a decorator"),Object(r.b)("pre",{parentName:"li"},Object(r.b)("code",a({parentName:"pre"},{className:"language-js"}),"@decorate\nclass MyComponent extends React.Component {\n  ...\n}\n"))),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"decorate")," stores tracking data in ",Object(r.b)("inlineCode",{parentName:"p"},"this.$"),"."),Object(r.b)("p",{parentName:"li"},"Avoid using ",Object(r.b)("inlineCode",{parentName:"p"},"$")," as instance variable/method in decorated components")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("p",{parentName:"li"},Object(r.b)("inlineCode",{parentName:"p"},"decorate")," uses ",Object(r.b)("inlineCode",{parentName:"p"},"contextType")," to inject store to ",Object(r.b)("inlineCode",{parentName:"p"},"this.context"),"."),Object(r.b)("p",{parentName:"li"},"You can't use ",Object(r.b)("inlineCode",{parentName:"p"},"contextType")," with ",Object(r.b)("inlineCode",{parentName:"p"},"decorate"),"."))))}b&&b===Object(b)&&Object.isExtensible(b)&&!b.hasOwnProperty("__filemeta")&&Object.defineProperty(b,"__filemeta",{configurable:!0,value:{name:"MDXContent",filename:"docs/observe.mdx"}}),b.isMDXComponent=!0}}]);
//# sourceMappingURL=component---docs-observe-mdx-87144a88c5076d054f29.js.map